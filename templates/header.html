{% load static %}
{% load active_link_tags %}

<header class="fixed left-0 top-0 z-50 h-[var(--header-height)] w-full shadow-lg border-b border-b-border-muted backdrop-blur-sm">
    <div class="flex h-full w-full justify-between">
        <div class="flex w-[var(--sidebar-width)] border-r-border-muted items-center justify-between border-r px-4">
            <a class="flex items-end gap-2" href="{% url 'blog:home' %}">
                <img class="h-6 w-6" src="{% static 'icons/logo.svg' %}" alt="logo">
                <span class="hover:underline decoration-2 font-bold">trng.dev</span>
            </a>

            <button id="toggle-sidebar-desktop" class="hidden md:block group/nav hover:bg-background-navbar-link-hover hover:text-gold px-3 py-2 rounded-lg" onclick="toggleNav.bind(this)()">
                <svg class="hidden group-[.open]/nav:block" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"></path><path d="M9 4v16"></path><path d="M15 10l-2 2l2 2"></path></svg>

                <svg class="block group-[.open]/nav:hidden" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"></path><path d="M9 4v16"></path><path d="M14 10l2 2l-2 2"></path></svg>
            </button>

            <button
                id="toggle-sidebar-mobile"
                class="md:hidden shadow-sm relative w-10 h-10 flex flex-col items-center justify-center group [&.open]:border-2 rounded-md [&.open]:border-gold [&.open]:bg-background-navbar-link-hover transition-all"
                onclick="toggleNav.bind(this)()"
            >
                <!-- Top bar -->
                <span class="block w-6 h-0.5 transition-transform duration-300 ease-in-out group-[.open]:rotate-45 group-[.open]:translate-y-1.5 bg-primary group-[.open]:bg-gold"></span>
                
                <!-- Middle bar -->
                <span class="block w-6 h-0.5 my-1 transition-opacity duration-300 ease-in-out group-[.open]:opacity-0 bg-primary"></span>
                
                <!-- Bottom bar -->
                <span class="block w-6 h-0.5 transition-transform duration-300 ease-in-out group-[.open]:-rotate-45 group-[.open]:-translate-y-1.5 bg-primary group-[.open]:bg-gold"></span>
            </button>
        </div>

        <section class="flex gap-4 mr-4">
            <nav class="md:block hidden">
                <ul class="flex gap-4 items-center h-full header-actions">
                    <li>
                        <a href="#" class="btn-nav">
                            <img src="{% static 'icons/notes.svg' %}" alt="notes">
                            Notes
                        </a>
                    </li>
                    <li>
                        <a href="#" class="btn-nav">
                            <img class="fill-gold" src="{% static 'icons/projects.svg' %}" alt="projects">
                            Projects
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'blog:about' %}" class="btn-nav {% active_link 'blog:about' strict=True %}">
                            <img src="{% static 'icons/face.svg' %}" alt="about-me">
                            About
                        </a>
                    </li>
                </ul>
            </nav>

            <ul class="flex items-center gap-2 md:gap-4 social-actions">
                <li>
                    <button id="toggle-darkmode" class="group/darkmode" onclick="toggleDarkMode()">
                        <img class="hidden group-[.dark]/darkmode:block h-6 w-6" src="{% static 'icons/moon.svg' %}" alt="darkmode">
                        <img class="block group-[.dark]/darkmode:hidden h-6 w-6" src="{% static 'icons/sun.svg' %}" alt="darkmode">
                    </button>
                </li>
                <li><a class="block fill-primary" href="{{ github_link|default:"#" }}" target="_blank" rel="noopener noreferrer"><svg class="" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" x="0" y="0" viewBox="0 0 24 24" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M12 .5C5.37.5 0 5.78 0 12.292c0 5.211 3.438 9.63 8.205 11.188.6.111.82-.254.82-.567 0-.28-.01-1.022-.015-2.005-3.338.711-4.042-1.582-4.042-1.582-.546-1.361-1.335-1.725-1.335-1.725-1.087-.731.084-.716.084-.716 1.205.082 1.838 1.215 1.838 1.215 1.07 1.803 2.809 1.282 3.495.981.108-.763.417-1.282.76-1.577-2.665-.295-5.466-1.309-5.466-5.827 0-1.287.465-2.339 1.235-3.164-.135-.298-.54-1.497.105-3.121 0 0 1.005-.316 3.3 1.209.96-.262 1.98-.392 3-.398 1.02.006 2.04.136 3 .398 2.28-1.525 3.285-1.209 3.285-1.209.645 1.624.24 2.823.12 3.121.765.825 1.23 1.877 1.23 3.164 0 4.53-2.805 5.527-5.475 5.817.42.354.81 1.077.81 2.182 0 1.578-.015 2.846-.015 3.229 0 .309.21.678.825.56C20.565 21.917 24 17.495 24 12.292 24 5.78 18.627.5 12 .5z" fill="currentColor" opacity="1" data-original="#000000"></path></g></svg></a></li>
                <li><a class="h-6 w-6 block" href="{{ linkedin_link|default:"#"}}" target="_blank" rel="noopener noreferrer"><img src="{% static 'icons/linkedin.png' %}" alt=""></a></li>
            </ul>
        </section>
    </div>
</header>
